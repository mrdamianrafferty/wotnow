(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{142:(n,e,i)=>{"use strict";function a(n,e){if(null==e[function(n){let e=n.match(/^([a-zA-Z_]+)=(-?\d+(?:\.\d+)?)\.\.(-?\d+(?:\.\d+)?)/);if(e)return e[1];let i=n.match(/^([a-zA-Z_]+)[<>=!]=?/);return i?i[1]:n}(n)])return!0;let i=function(n){let e=n.match(/^([a-zA-Z_]+)=(-?\d+(?:\.\d+)?)\.\.(-?\d+(?:\.\d+)?)/);if(e)return{key:e[1],operator:"range",min:parseFloat(e[2]),max:parseFloat(e[3])};let i=n.match(/^([a-zA-Z_]+)([<>=!]=?|==)(-?\d+(?:\.\d+)?)/);return i?{key:i[1],operator:i[2],value:parseFloat(i[3])}:null}(n);if(!i)return!1;let a=e[i.key];if(null==a)return!1;if("range"===i.operator)return a>=i.min&&a<=i.max;switch(i.operator){case">":return a>i.value;case">=":return a>=i.value;case"<":return a<i.value;case"<=":return a<=i.value;case"=":case"==":return a===i.value;case"!=":return a!==i.value;default:return console.warn("Unknown operator: ".concat(i.operator)),!1}}function t(n){let{forecast:e=[],interests:i=[],activities:t=[]}=n;return Array.isArray(t)&&Array.isArray(e)?e.map(n=>{let e=Array.isArray(n.marine)&&n.marine.length>0?n.marine[0]:{},o={...n.weather,...e},r=new Date(n.date).getMonth()+1,l=t.filter(n=>i.includes(n.id)&&(!n.seasonalMonths||n.seasonalMonths.includes(r))),d=[],s=[],c=[],g=[];for(let n of l){let{id:e,weatherSensitive:i,indoorAlternative:t}=n,r=function(n,e){var i,t,o;return!1===n.weatherSensitive?"indoor":(null==(i=n.poorConditions)?void 0:i.some(n=>a(n,e)))?"excluded":(null==(t=n.perfectConditions)?void 0:t.length)&&n.perfectConditions.every(n=>a(n,e))?"perfect":(null==(o=n.goodConditions)?void 0:o.length)&&n.goodConditions.every(n=>a(n,e))?"good":n.goodConditions&&0!==n.goodConditions.length||n.perfectConditions&&0!==n.perfectConditions.length?"excluded":"acceptable"}(n,o);"excluded"!==r&&("perfect"===r?d.push({activityId:e,evaluation:"perfect"}):"good"===r?s.push({activityId:e,evaluation:"good"}):"acceptable"===r?s.push({activityId:e,evaluation:"acceptable"}):"indoor"===r&&g.push({activityId:e,evaluation:"indoor"}),i&&t&&c.push(t))}let p=[],u=new Set;function y(n){for(let e of n)!u.has(e.activityId)&&p.length<10&&(u.add(e.activityId),p.push(e))}if(y(d),y(s),p.length<10&&c.length>0)for(let n of c){let e=t.find(e=>e.id===n||e.name===n);if(e&&!u.has(e.id)&&(p.push({activityId:e.id,evaluation:"indoorAlternative"}),u.add(e.id),p.length>=10))break}if(p.length<10){for(let n of g)if(!u.has(n.activityId)&&(p.push(n),u.add(n.activityId),p.length>=10))break}return{date:n.date,suggestions:p}}):[]}i.d(e,{p:()=>t})},1254:(n,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>p});var a=i(7876),t=i(4232),o=i(142),r=i(3956),l=i(7831);let d={beach_volleyball:"\uD83C\uDFD0",american_football:"\uD83C\uDFC8",baseball:"⚾",hurling_camogie:"\uD83C\uDFD1",gaelic_football:"\uD83C\uDFD0",hockey:"\uD83C\uDFD2",netball:"\uD83C\uDFD0",golf:"⛳",tennis:"\uD83C\uDFBE",tennis_indoor:"\uD83C\uDFBE",squash:"\uD83C\uDFBE",badminton:"\uD83C\uDFF8",table_tennis:"\uD83C\uDFD3",archery:"\uD83C\uDFF9",pickleball:"\uD83C\uDFD3",padel:"\uD83C\uDFBE",kayaking:"\uD83D\uDEF6",canoeing:"\uD83D\uDEF6",surfing:"\uD83C\uDFC4",stand_up_paddleboarding:"\uD83E\uDDA6",snorkeling:"\uD83E\uDD3F",swimming:"\uD83C\uDFCA",indoor_swimming:"\uD83C\uDFCA",mountain_biking:"\uD83D\uDEB5",rock_climbing:"\uD83E\uDDD7",indoor_climbing:"\uD83E\uDDD7",skateboarding:"\uD83D\uDEF9",rollerblading:"\uD83D\uDEFC",running:"\uD83C\uDFC3",trail_running:"\uD83C\uDFC3",road_cycling:"\uD83D\uDEB4",cycling:"\uD83D\uDEB4",urban_exploring:"\uD83D\uDEB6\uD83C\uDFFD",gym_workout:"\uD83C\uDFCB️",outdoor_gym:"\uD83D\uDCAA",yoga:"\uD83E\uDDD8",outdoor_yoga:"\uD83E\uDDD8",meditation:"\uD83E\uDDD8",outdoor_meditation:"\uD83E\uDDD8",pilates:"\uD83E\uDD38",martial_arts:"\uD83E\uDD4B",tai_chi:"\uD83E\uDD77\uD83C\uDFFD",hiking:"\uD83E\uDD7E",birdwatching:"\uD83E\uDD85",photography:"\uD83D\uDCF8",foraging:"\uD83C\uDF3F",mushroom_hunting:"\uD83C\uDF44",stargazing:"⭐",fishing:"\uD83C\uDFA3",fly_fishing_freshwater:"\uD83E\uDEB6",coarse_fishing:"\uD83C\uDFA3",sea_fishing_shore:"\uD83C\uDF0A",sea_fishing_boat:"\uD83D\uDEA4",ice_fishing:"\uD83E\uDDCA",picnicking:"\uD83E\uDDFA",bbq:"\uD83C\uDF54",geocaching:"\uD83D\uDDFA️",camping:"⛺",outdoor_reading:"\uD83D\uDCDA",dog_walking:"\uD83D\uDC15",outdoor_playground:"\uD83D\uDEDD",outdoor_chess:"♟️",skiing:"⛷️",snowboarding:"\uD83C\uDFC2",cross_country_skiing:"\uD83C\uDFBF",ice_skating:"⛸️",curling:"\uD83E\uDD4C",ice_hockey:"\uD83C\uDFD2",painting:"\uD83C\uDFA8",outdoor_painting:"\uD83C\uDFA8",crafts:"✂️",knitting:"\uD83E\uDDF6",diy:"\uD83D\uDD28",playing_records:"\uD83D\uDC69\uD83C\uDFFD‍\uD83C\uDFA4",make_music:"\uD83C\uDFB5",dance:"\uD83D\uDC83",outdoor_music:"\uD83C\uDFB5",reading:"\uD83D\uDCDA",going_to_pub:"\uD83C\uDF7A",playing_cards:"\uD83C\uDCCF",watch_a_movie:"\uD83D\uDCFA",cooking:"\uD83D\uDC68‍\uD83C\uDF73",cinema:"\uD83C\uDFAC",museum:"\uD83C\uDFDB️",shopping:"\uD83D\uDECD️",cafe:"☕"};function s(n){return d[n]||"❔"}let c={football_soccer:"/crowdy.png",cricket:"/crowdy.png",rugby:"/crowdy.png",basketball_outdoor:"/crowdy.png",beach_volleyball:"/beachy.png",american_football:"/crowdy.png",baseball:"/crowdy.png",hurling:"/crowdy.png",gaelic_football:"/crowdy.png",hockey:"/crowdy.png",netball:"/crowdy.png",golf:"/crowdy.png",tennis:"/crowdy.png",tennis_indoor:"/crowdy.png",squash:"/crowdy.png",badminton:"/crowdy.png",table_tennis:"/crowdy.png",archery:"/crowdy.png",pickleball:"/crowdy.png",padel:"/crowdy.png",kayaking:"/watery.png",canoeing:"/watery.png",surfing:"/watery.png",stand_up_paddleboarding:"/watery.png",snorkeling:"/beachy.png",swimming:"/beachy.png",indoor_swimming:"/watery.png",fly_fishing_freshwater:"/lake.png",coarse_fishing:"/lake.png",sea_fishing_shore:"/beachy.png",sea_fishing_boat:"/sea.png",mountain_biking:"/mountainy.png",rock_climbing:"/mountainy.png",hiking:"/mountainy.png",skateboarding:"/hackney.png",rollerblading:"/hackney.png",trail_running:"/woody.png",photography:"/hackney.png",running:"/city.png",road_cycling:"/city.png",cycling:"/city.png",urban_exploring:"/parky.png",outdoor_gym:"/parky.png",outdoor_yoga:"/parky.png",outdoor_meditation:"/parky.png",tai_chi:"/indoorsy.png",picnicking:"/parky.png",bbq:"/parky.png",geocaching:"/parky.png",camping:"/parky.png",outdoor_reading:"/parky.png",dog_walking:"/parky.png",outdoor_playground:"/parky.png",outdoor_chess:"/parky.png",outdoor_painting:"/parky.png",outdoor_music:"/parky.png",gym_workout:"/mountainy.png",yoga:"/gymy.png",pilates:"/gymy.png",martial_arts:"/gymy.png",indoor_climbing:"/gymy.png",meditation:"/indoorsy.png",crafts:"/indoorsy.png",knitting:"/indoorsy.png",diy:"/indoorsy.png",playing_records:"/indoorsy.png",reading:"/indoorsy.png",playing_cards:"/indoorsy.png",watch_a_movie:"/indoorsy.png",cooking:"/indoorsy.png",dance:"/dancey.png",make_music:"/creative.png",painting:"/creative.png",skiing:"/snowy.png",snowboarding:"/snowy.png",cross_country_skiing:"/snowy.png",ice_skating:"/snowy.png",curling:"/snowy.png",ice_hockey:"/snowy.png",ice_fishing:"/snowy.png",birdwatching:"/woodsy.png",foraging:"/woodsy.png",mushroom_hunting:"/woodsy.png",stargazing:"/milkyway.png",going_to_pub:"/pubby.png",cafe:"/pubby.png",cinema:"/buildingy.png",museum:"/buildingy.png",shopping:"/buildingy.png"},g=n=>{let e=["reading","going_to_pub","watch_a_movie","cooking","cinema","museum","shopping","cafe","playing_cards","crafts","knitting","diy","indoor_climbing","gym_workout","yoga","meditation","painting"],i=e.filter(e=>n.includes(e));return[...i,...e.filter(n=>!i.includes(n))].slice(0,10).map(n=>{let e=r.b.find(e=>e.id===n);return{activityId:n,activity:e}})};function p(){var n;let{preferences:e,setPreferences:i}=(0,l.HW)(),{interests:d=[],location:p}=e,[u,y]=(0,t.useState)([]),[h,m]=(0,t.useState)((null==p?void 0:p.name)||""),[_,b]=(0,t.useState)(!0),[f,v]=(0,t.useState)(null),w=0===d.length,k=!(null==p?void 0:p.lat)||!(null==p?void 0:p.lon);(0,t.useEffect)(()=>{(async()=>{try{let n="748bd0822b74e58605964652c38d0796";if(!n)throw Error("Missing OpenWeather API key");if(!(null==p?void 0:p.lat)||!(null==p?void 0:p.lon))return;b(!0);let e=await fetch("https://api.openweathermap.org/data/2.5/forecast?lat=".concat(p.lat,"&lon=").concat(p.lon,"&units=metric&appid=").concat(n)),i=await e.json();if(!i.list)throw Error("Invalid weather data");let a={};i.list.forEach(n=>{let e=n.dt_txt.split(" ")[0];a[e]||(a[e]=[]),a[e].push(n)});let t=Object.entries(a).slice(0,5).map(n=>{var e,i,a,t;let[o,r]=n,l=null!=(a=r.find(n=>n.dt_txt.includes("12:00:00")))?a:r[0];return{date:o,temperature:Math.round(l.main.temp),tempMax:Math.round(l.main.temp_max),tempMin:Math.round(l.main.temp_min),condition:l.weather[0].main,description:l.weather[0].description,icon:l.weather[0].icon,rain:Math.round((null==(e=l.rain)?void 0:e["3h"])||0),snow:Math.round((null==(i=l.snow)?void 0:i["3h"])||0),wind_speed:Math.round(3.6*l.wind.speed),clouds:l.clouds.all,humidity:l.main.humidity,visibility:null!=(t=l.visibility)?t:1e4,totalRain:Math.round(r.reduce((n,e)=>{var i;return n+((null==(i=e.rain)?void 0:i["3h"])||0)},0)),rainDetails:r.filter(n=>{var e;return null==(e=n.rain)?void 0:e["3h"]}).map(n=>"".concat(new Date(n.dt_txt).getHours(),":00 ").concat(Math.round(n.rain["3h"]),"mm"))}});y(t),v(null)}catch(n){v(n.message||"Failed to load forecast data."),y([])}finally{b(!1)}})()},[p]);let x=async()=>{try{let n=await fetch("https://api.openweathermap.org/geo/1.0/direct?q=".concat(encodeURIComponent(h),"&limit=1&appid=").concat("748bd0822b74e58605964652c38d0796")),a=await n.json();if(Array.isArray(a)&&a.length>0){let{lat:n,lon:t}=a[0];i({...e,location:{name:h,lat:n,lon:t}}),v(null)}else v("Could not find that location. Please try another.")}catch(n){v("Failed to fetch location. Please try again.")}};return(0,a.jsxs)("section",{children:[(0,a.jsx)("header",{className:"homepage-banner",children:(0,a.jsxs)("div",{className:"homepage-banner__container",children:[(0,a.jsx)("img",{src:"/wotnow-horizontal.png",alt:"WotNow Logo",className:"homepage-banner__logo"}),(0,a.jsxs)("div",{className:"homepage-banner__text",children:[(0,a.jsx)("h1",{className:"homepage-banner__title",children:"What's good, when?"}),(0,a.jsx)("p",{className:"homepage-banner__subtitle",children:"Live your best life, every day"})]})]})}),(0,a.jsxs)("div",{className:"location-banner",children:[(0,a.jsxs)("div",{className:"location-banner__container",children:[(0,a.jsx)("label",{htmlFor:"location-input",className:"location-banner__label",children:"\uD83D\uDCCD Your location:"}),(0,a.jsx)("input",{id:"location-input",type:"text",className:"location-banner__input",value:h,onChange:n=>m(n.target.value),placeholder:"Enter your city or town","aria-label":"Location input"}),(0,a.jsx)("button",{className:"location-banner__button",onClick:x,children:"Save"}),(0,a.jsx)("span",{style:{marginLeft:10,color:"#237e6b",fontWeight:500},"aria-live":"polite",children:null!=(n=null==p?void 0:p.name)?n:""})]}),f&&(0,a.jsx)("p",{className:"location-error",style:{color:"#c00",marginTop:6},children:f})]}),w&&(0,a.jsxs)("aside",{className:"onboarding-message",children:["\uD83D\uDC4B Welcome! ",(0,a.jsx)("a",{href:"/interests",children:"Choose your favourite activities"})," to get personalized suggestions."]}),k?(0,a.jsx)("div",{style:{padding:"2rem"},children:"Please enter a location above to view tailored suggestions."}):_?(0,a.jsx)("div",{style:{padding:"2rem"},children:"⏳ Loading forecast…"}):f?(0,a.jsxs)("div",{style:{padding:"2rem",color:"red"},children:["⚠️ ",f]}):(0,a.jsx)("div",{className:"main-grid",role:"list",children:u.map((n,e)=>{var i,t;let l=null!=(t=null==(i=(0,o.p)({forecast:[{date:n.date,weather:{temperature:n.temperature,precipitation:n.rain,windSpeed:n.wind_speed,clouds:n.clouds,water_temp:null,humidity:n.humidity,visibility:n.visibility}}],interests:d,activities:r.b})[0])?void 0:i.suggestions)?t:[],p=l.filter(n=>"perfect"===n.evaluation),u=l.filter(n=>["good","acceptable"].includes(n.evaluation)),y=l.filter(n=>["indoor","indoorAlternative"].includes(n.evaluation)),h=g(d),m=0===p.length&&0===u.length,_=p.length>0?p[0].activityId:u.length>0?u[0].activityId:y.length>0?y[0].activityId:"indoorsy",b="url(".concat(c[_]||"/indoorsy.png",")");return(0,a.jsxs)("article",{className:"activity-card-enhanced",style:{backgroundImage:b,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",borderRadius:22,color:"#fff",overflow:"hidden",position:"relative",minHeight:170},role:"listitem",tabIndex:0,"aria-label":"Suggestions for ".concat(new Date(n.date).toLocaleDateString("en-GB",{weekday:"long"})),children:[(0,a.jsx)("div",{style:{position:"absolute",inset:0,background:"rgba(0,0,0,0.32)",borderRadius:22,zIndex:1}}),(0,a.jsxs)("div",{style:{position:"relative",zIndex:2,padding:"1.5rem"},children:[(0,a.jsx)("h2",{className:"day-name",children:0===e?"Today is perfect for":new Date(n.date).toLocaleDateString("en-GB",{weekday:"long"})}),(0,a.jsxs)("p",{children:[n.temperature,"\xb0C • ",n.description," ",n.totalRain>0?"• ".concat(n.totalRain,"mm rain"):"• Dry day"]}),p.length>0&&(()=>{let n=p[0],e=r.b.find(e=>e.id===n.activityId);return(0,a.jsx)("div",{className:"perfect-activity",style:{marginTop:18},children:(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,a.jsx)("span",{style:{fontSize:"2.3rem",marginRight:15},children:s(n.activityId)}),(0,a.jsxs)("strong",{style:{fontSize:"1.25rem"},children:[(null==e?void 0:e.name)||n.activityId,null!=n.score?" (".concat(Math.round(n.score),")"):""]})]})})})(),!m&&u.length>0&&(0,a.jsxs)("div",{className:"also-good-section",style:{marginTop:14},children:[(0,a.jsx)("strong",{children:"Also good:"}),(0,a.jsx)("ul",{children:u.map(n=>{let e=r.b.find(e=>e.id===n.activityId);return(0,a.jsxs)("li",{children:[s(n.activityId)," ",(null==e?void 0:e.name)||n.activityId]},n.activityId)})})]}),(m||y.length>0)&&(0,a.jsxs)("div",{className:"indoor-section",style:{marginTop:14},children:[(0,a.jsx)("strong",{children:"Indoor ideas:"}),(0,a.jsx)("ul",{children:(y.length>0?y:h).map(n=>{let e=r.b.find(e=>e.id===n.activityId);return(0,a.jsxs)("li",{children:[s(n.activityId)," ",(null==e?void 0:e.name)||n.activityId]},n.activityId)})})]})]})]},n.date)})})]})}},6760:(n,e,i)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return i(1254)}])}},n=>{var e=e=>n(n.s=e);n.O(0,[636,593,792],()=>e(6760)),_N_E=n.O()}]);