"use strict";(()=>{var e={};e.id=233,e.ids=[233],e.modules={3480:(e,r,t)=>{e.exports=t(5600)},5061:(e,r,t)=>{t.r(r),t.d(r,{config:()=>u,default:()=>d,routeModule:()=>l});var n={};t.r(n),t.d(n,{default:()=>o});var s=t(3480),i=t(8667),a=t(6435);async function o(e,r){let{city:t,radius:n="100km",keywords:s}=e.query,i=process.env.EVENTBRITE_API_KEY;if(!i)return console.error("Missing Eventbrite API key"),r.status(500).json({error:"Server misconfigured: missing Eventbrite token"});if(!t||"string"!=typeof t)return r.status(400).json({error:"Missing or invalid city parameter"});let a=new URLSearchParams({"location.address":t,"location.within":String(n),expand:"venue"});s&&a.set("q",String(s));try{let e=`https://www.eventbriteapi.com/v3/venues/search/?${a.toString()}`,t=await fetch(e,{headers:{Authorization:`Bearer ${i}`}});if(!t.ok){let e=await t.text();return console.error("Eventbrite venue API responded:",e),r.status(502).json({error:"Failed to fetch venues from Eventbrite"})}let n=((await t.json()).venues||[]).map(e=>({id:e.id,name:e.name,address:[e.address?.address_1,e.address?.address_2].filter(Boolean).join(", "),city:e.address?.city||"",country:e.address?.country||"",lat:e.address?.latitude?parseFloat(e.address.latitude):void 0,lon:e.address?.longitude?parseFloat(e.address.longitude):void 0,url:e.resource_uri}));return r.status(200).json({venues:n})}catch(e){return console.error("Venue fetch error:",e),r.status(500).json({error:"Internal server error"})}}let d=(0,a.M)(n,"default"),u=(0,a.M)(n,"config"),l=new s.PagesAPIRouteModule({definition:{kind:i.A.PAGES_API,page:"/api/eventVenues",pathname:"/api/eventVenues",bundlePath:"",filename:""},userland:n})},5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6435:(e,r)=>{Object.defineProperty(r,"M",{enumerable:!0,get:function(){return function e(r,t){return t in r?r[t]:"then"in r&&"function"==typeof r.then?r.then(r=>e(r,t)):"function"==typeof r&&"default"===t?r:void 0}}})},8667:(e,r)=>{Object.defineProperty(r,"A",{enumerable:!0,get:function(){return t}});var t=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})}};var r=require("../../webpack-api-runtime.js");r.C(e);var t=r(r.s=5061);module.exports=t})();