"use strict";(()=>{var e={};e.id=196,e.ids=[196,220,636],e.modules={148:(e,t,r)=>{r.r(t),r.d(t,{config:()=>x,default:()=>m,getServerSideProps:()=>g,getStaticPaths:()=>f,getStaticProps:()=>S,reportWebVitals:()=>j,routeModule:()=>A,unstable_getServerProps:()=>y,unstable_getServerSideProps:()=>D,unstable_getStaticParams:()=>b,unstable_getStaticPaths:()=>w,unstable_getStaticProps:()=>P});var i={};r.r(i),r.d(i,{default:()=>p});var n=r(3885),s=r(237),a=r(1413),d=r(3022),l=r(8198),o=r(8732),c=r(2015),u=r.n(c),h=r(2165);let p=()=>{let{preferences:e}=(0,h.HW)(),{location:t}=e,[r,i]=(0,c.useState)([]),[n,s]=(0,c.useState)(!0),[a,d]=(0,c.useState)(""),[l,p]=(0,c.useState)({}),[m,S]=(0,c.useState)(""),[f,g]=(0,c.useState)(""),x="748bd0822b74e58605964652c38d0796";if((0,c.useEffect)(()=>{if(!t||!t.lat||!t.lon){d("Location not set in preferences."),s(!1);return}if(!x){d("OpenWeather API key is not configured."),s(!1);return}(async()=>{try{let e=await fetch(`https://api.openweathermap.org/data/2.5/forecast?lat=${t.lat}&lon=${t.lon}&units=metric&appid=${x}`);if(!e.ok)throw Error("Failed to fetch forecast");let r=await e.json(),n=new Date().toISOString().split("T")[0],s=r.list.map(e=>{let[t,r]=e.dt_txt.split(" ");return{date:t,time:r.slice(0,5),temp:Math.round(e.main.temp),description:e.weather?.[0]?.description??"",precipitation:e.rain?.["3h"]??e.snow?.["3h"]??0,wind:e.wind?.speed??0,humidity:e.main?.humidity??0,clouds:e.clouds?.all??0,visibility:(e.visibility??1e4)/1e3}}),a={};a[n]=!0,p(a),i(s);let d=await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${t.lat}&lon=${t.lon}&units=metric&appid=${x}`);if(!d.ok)throw Error("Failed to fetch weather data");let l=await d.json(),o=new Date(1e3*l.sys.sunrise),c=new Date(1e3*l.sys.sunset);S(o.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})),g(c.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}))}catch(e){d(e.message)}finally{s(!1)}})()},[t,x]),n)return(0,o.jsx)("div",{children:"Loading forecast..."});if(a)return(0,o.jsx)("div",{style:{color:"red"},children:a});let j=(e,t)=>{let r=e.toLowerCase(),i=(()=>{if(!t)return!1;let[e]=t.split(":"),r=parseInt(e,10);return r<6||r>=20})();return r.includes("rain")||r.includes("shower")?"\uD83C\uDF27️":r.includes("storm")||r.includes("thunder")?"⛈️":r.includes("snow")||r.includes("sleet")||r.includes("flurr")?"❄️":r.includes("clear")||r.includes("sun")?i?"\uD83C\uDF19":"☀️":r.includes("cloud")?"☁️":i?"\uD83C\uDF19":"☀️"},P=e=>{p(t=>({...t,[e]:!t[e]}))},w=r.reduce((e,t)=>(e[t.date]||(e[t.date]=[]),e[t.date].push(t),e),{}),b=e=>{let t=new Date(e),r=new Date,i=new Date;return(i.setDate(r.getDate()+1),t.toDateString()===r.toDateString())?"Today":t.toDateString()===i.toDateString()?"Tomorrow":new Intl.DateTimeFormat("en-US",{weekday:"long"}).format(t)};return(0,o.jsxs)("div",{className:"container",style:{paddingLeft:"1rem"},children:[(0,o.jsxs)("h1",{children:["5-Day Detailed Forecast for ",t.name.charAt(0).toUpperCase()+t.name.slice(1)]}),(0,o.jsxs)("table",{className:"weather-table spaced",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Time"}),(0,o.jsx)("th",{children:"\uD83C\uDF21️ Temp"}),(0,o.jsx)("th",{children:"Weather"}),(0,o.jsx)("th",{children:"☔ Precip"}),(0,o.jsx)("th",{children:"\uD83D\uDCA8 Wind"}),(0,o.jsx)("th",{children:"\uD83D\uDCA7 Humidity"}),(0,o.jsx)("th",{children:"☁️ Clouds"}),(0,o.jsx)("th",{children:"\uD83D\uDD0D Visibility"})]})}),(0,o.jsx)("tbody",{children:Object.entries(w).map(([e,t])=>(0,o.jsxs)(u().Fragment,{children:[(0,o.jsx)("tr",{className:"day-header",onClick:()=>P(e),children:(0,o.jsxs)("td",{colSpan:8,style:{cursor:"pointer",background:"#f0f0f0"},children:[(0,o.jsxs)("span",{style:{fontWeight:"bold"},children:[l[e]?"▼":"▶"," ",b(e)]}),"Today"===b(e)&&m&&f?` (Sunrise at ${m} and Sunset at ${f})`:""]})}),l[e]&&t.map(e=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(()=>{let t=new Date(`${e.date}T${e.time}`),r=t.getHours();return(t.getMinutes().toString().padStart(2,"0"),0===r)?"Midnight":12===r?"Noon":t.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})})()}),(0,o.jsxs)("td",{className:e.temp>25?"hot":e.temp<5?"cold":"",children:[e.temp,"\xb0C"]}),(0,o.jsx)("td",{style:{fontSize:"1.2rem"},children:j(e.description,e.time)}),(0,o.jsxs)("td",{children:[e.precipitation," mm"]}),(0,o.jsxs)("td",{className:e.wind>15?"windy":"",children:[(3.6*e.wind).toFixed(1)," km/h"]}),(0,o.jsxs)("td",{children:[e.humidity,"%"]}),(0,o.jsxs)("td",{children:[e.clouds,"%"]}),(0,o.jsxs)("td",{children:[e.visibility," km"]})]},`${e.date}-${e.time}`))]},e))})]})]})},m=(0,a.M)(i,"default"),S=(0,a.M)(i,"getStaticProps"),f=(0,a.M)(i,"getStaticPaths"),g=(0,a.M)(i,"getServerSideProps"),x=(0,a.M)(i,"config"),j=(0,a.M)(i,"reportWebVitals"),P=(0,a.M)(i,"unstable_getStaticProps"),w=(0,a.M)(i,"unstable_getStaticPaths"),b=(0,a.M)(i,"unstable_getStaticParams"),y=(0,a.M)(i,"unstable_getServerProps"),D=(0,a.M)(i,"unstable_getServerSideProps"),A=new n.PagesRouteModule({definition:{kind:s.A.PAGES,page:"/weather",pathname:"/weather",bundlePath:"",filename:""},components:{App:l.default,Document:d.default},userland:i})},237:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return r}});var r=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},361:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},1413:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},2015:e=>{e.exports=require("react")},3022:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});var i=r(8732),n=r(2341),s=r.n(n);class a extends s(){render(){return(0,i.jsxs)(n.Html,{children:[(0,i.jsx)(n.Head,{}),(0,i.jsxs)("body",{children:[(0,i.jsx)(n.Main,{}),(0,i.jsx)(n.NextScript,{})]})]})}}},3873:e=>{e.exports=require("path")},8732:e=>{e.exports=require("react/jsx-runtime")}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[300,341,918,198],()=>r(148));module.exports=i})();